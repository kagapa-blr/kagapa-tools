<!-- Navbar Partial -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top shadow-sm">
  <div class="container">

    <!-- Brand -->
    <a class="navbar-brand d-flex flex-column" href="{{ url_for('template_routes.home_page') }}">
      <span class="fw-bold" data-i18n="app.title">Kagapa Tools</span>
      <small class="text-muted" data-i18n="app.subtitle">
        Internal & Developer Utility Platform
      </small>
    </a>

    <!-- Right Section ONLY -->
    <div class="d-flex align-items-center gap-2 ms-auto" id="authArea">

      <!-- Logged OUT -->
      <a href="{{ url_for('user_login.login_page') }}" class="btn btn-outline-light btn-sm" id="loginBtn">
        Login
      </a>

      <!-- Logged IN -->
      <div class="dropdown d-none" id="userDropdown">
        <button class="btn btn-outline-light btn-sm dropdown-toggle
               d-flex align-items-center gap-2" data-bs-toggle="dropdown">
          <span class="avatar-circle" id="userAvatar">U</span>
          <span class="d-none d-md-inline" id="usernameLabel"></span>
        </button>

        <ul class="dropdown-menu dropdown-menu-end">
          <li>
            <button class="dropdown-item" onclick="openProfileModal()">
              üë§ Profile
            </button>
          </li>

          <li>
            <hr class="dropdown-divider">
          </li>

          <li>
            <form action="{{ url_for('user_login.logout') }}" method="post">
              <button type="submit" class="dropdown-item text-danger">
                üö™ Logout
              </button>
            </form>
          </li>
        </ul>
      </div>

      <!-- Language Switch -->
      <button class="btn btn-outline-light btn-sm" data-lang-btn="en">EN</button>
      <button class="btn btn-light btn-sm active" data-lang-btn="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</button>

    </div>
  </div>
</nav>

<!-- Profile Modal -->
<div class="modal fade" id="profileModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-4 shadow">

      <div class="modal-header">
        <h5 class="modal-title">üë§ User Profile</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <div class="mb-3">
          <label class="fw-bold">Username</label>
          <div id="profileUsername"></div>
        </div>

        <div class="mb-3">
          <label class="fw-bold">Role</label>
          <div id="profileRole"></div>
        </div>

        <div class="mb-3">
          <label class="fw-bold">Status</label>
          <span id="profileStatus" class="badge"></span>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>